<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Ep.12 Flask configuration files"><meta property="og:title" content="Ep.12 Flask configuration files" />
<meta property="og:description" content="Flask configuration files | Learning Flask Ep. 12 Configuring Flask applications using a config file and classes
Configuration is an important part of any appliction and Flask provides several different methods for us to configure our app.
In this part of the &ldquo;Learning Flask&rdquo; series, we&rsquo;re going to cover our preferred app configuration method, using a config file with classes.
Let&rsquo;s get started.
Config basics Every Flask application has a global config object which can be accessed via app." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dragon-library.github.io/library/tutorials/docs/python/flask/learning-flask/ep-12/" />

<title>Ep.12 Flask configuration files | Tutorials</title>
<link rel="icon" href="/library/tutorials/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/library/tutorials/book.min.d7931d740642e656222bfe71c31926bed24ceb9fafa2d9069a7a83fa55070bb9.css" integrity="sha256-15MddAZC5lYiK/5xwxkmvtJM65&#43;votkGmnqD&#43;lUHC7k=">


<script defer src="/library/tutorials/en.search.min.cea1133e9b29e4d856c65970fdf9c3648003a14ab3aa47858673822782b70898.js" integrity="sha256-zqETPpsp5NhWxllw/fnDZIADoUqzqkeFhnOCJ4K3CJg="></script>
<!-- highlight -->
  <link rel="stylesheet" href="https://dragon-library.github.io/library/tutorials/plugins/highlight/hybrid.css">


<!-- match-height JS -->
<script src="https://dragon-library.github.io/library/tutorials/plugins/match-height/jquery.matchHeight-min.js"></script>

<!-- highlight -->
<script src="https://dragon-library.github.io/library/tutorials/plugins/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://dragon-library.github.io/library/tutorials/"><span>Tutorials</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>





    

  
  





 
  
    




  
  <ul>
    
      
        

  <li >
    
      

  <a href="/library/tutorials/docs/python/" >
      Python
  </a>


    

    




  
  <ul>
    
      
        

  <li >
    
      

  <a href="/library/tutorials/docs/python/beginer/" >
      Beginners
  </a>


    

    






  </li>


      
    
      
        <li>

  <a href="/library/tutorials/docs/python/pythonthailand/" >
      Python Thailand
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/awesome/" >
      Awesome Python
  </a>

</li>
      
    
      
        

  <li >
    
      

  <a href="/library/tutorials/docs/python/e-book/" >
      e-Book
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/library/tutorials/docs/python/flask/" >
      Flask
  </a>


    

    




  
  <ul>
    
      
        

  <li >
    
      

  <a href="/library/tutorials/docs/python/flask/learning-flask/" >
      Learning Flask
  </a>


    

    




  
  <ul>
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-1/" >
      Ep.1 Your first Flask app
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-2/" >
      Ep.2 Flask application structure
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-3/" >
      Ep.3 Serving HTML files
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-4/" >
      Ep.4 Serving static files
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-5/" >
      Ep.5 Jinja template inheritance
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-6/" >
      Ep.6 Jinja template design
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-7/" >
      Ep.7 Working with forms in Flask
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-8/" >
      Ep.8 Generating dynamic URLs in Flask
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-9/" >
      Ep.9 Working with JSON data
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-10/" >
      Ep.10 Flask and the Fetch API
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-11/" >
      Ep.11 Query strings in Flask
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-12/"  class="active">
      Ep.12 Flask configuration files
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-13/" >
      Ep.13 Uploading files with Flask
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-14/" >
      Ep.14 Sending files with Flask
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-15/" >
      Ep.15 Flask cookies
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/learning-flask/ep-16/" >
      Ep.16 The Flask session object
  </a>

</li>
      
    
  </ul>
  



  </li>


      
    
      
        <li>

  <a href="/library/tutorials/docs/python/flask/primer-jinja-templating/" >
      Primer on Jinja Templating
  </a>

</li>
      
    
  </ul>
  



  </li>


      
    
      
        <li>

  <a href="/library/tutorials/docs/python/cheat-sheet/" >
      Python Cheat sheet
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/list-python-basics/" >
      List for Tutorial
  </a>

</li>
      
    
      
        <li>

  <a href="/library/tutorials/docs/python/modules-list/" >
      Modules List
  </a>

</li>
      
    
  </ul>
  



  </li>


      
    
      
        

  <li >
    
      

  <a href="/library/tutorials/docs/front-end/bootstrap/basic-bootstap/" >
      Bootstrap 4 แบบพื้นฐาน
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/library/tutorials/docs/front-end/javascript/" >
      JavaScript
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/library/tutorials/docs/articles/" >
      Articles
  </a>


    

    






  </li>


      
    
  </ul>
  



  











</nav>


<script>
(function() {
  var menu = document.querySelector("aside.book-menu nav");
  addEventListener("beforeunload", function(event) {
    localStorage.setItem("menu.scrollTop", menu.scrollTop);
  });
  menu.scrollTop = localStorage.getItem("menu.scrollTop");
})();
</script>

    </aside>

    <div class="book-page">
      <header class="flex align-center justify-between book-header">
  <label for="menu-control">
    <img src="/library/tutorials/svg/menu.svg" alt="Menu" />
  </label>
  <strong>Ep.12 Flask configuration files</strong>
</header>

      
<article class="markdown">

<h1 id="flask-configuration-files-learning-flask-ep-12">Flask configuration files | Learning Flask Ep. 12</h1>

<p>Configuring Flask applications using a config file and classes</p>

<p>Configuration is an important part of any appliction and Flask provides several different methods for us to configure our app.</p>

<p>In this part of the &ldquo;Learning Flask&rdquo; series, we&rsquo;re going to cover our preferred app configuration method, using a config file with classes.</p>

<p>Let&rsquo;s get started.</p>

<h3 id="config-basics">Config basics</h3>

<p>Every Flask application has a global  <code>config</code>  object which can be accessed via  <code>app.config</code>.</p>

<p>Flask&rsquo;s  <code>config</code>  object allows us to assign values to configuration variables, which we&rsquo;ll then have access to throughout our application.</p>

<p>The global  <code>config</code>  object can be treated just like a Python dictionary, which we can access and modify.</p>

<p>The best way to visually see the  <code>config</code>  object it to simply print it in one of your routes. Go ahead and add the following to any route:</p>

<p><code>print(app.config)</code></p>

<p>You&rsquo;ll see:</p>

<pre><code class="language-py">{'APPLICATION_ROOT': '/',
 'DEBUG': True,
 'ENV': 'development',
 'EXPLAIN_TEMPLATE_LOADING': False,
 'JSONIFY_MIMETYPE': 'application/json',
 'JSONIFY_PRETTYPRINT_REGULAR': False,
 'JSON_AS_ASCII': True,
 'JSON_SORT_KEYS': True,
 'MAX_CONTENT_LENGTH': None,
 'MAX_COOKIE_SIZE': 4093,
 'PERMANENT_SESSION_LIFETIME': datetime.timedelta(days=31),
 'PREFERRED_URL_SCHEME': 'http',
 'PRESERVE_CONTEXT_ON_EXCEPTION': None,
 'PROPAGATE_EXCEPTIONS': None,
 'SECRET_KEY': None,
 'SEND_FILE_MAX_AGE_DEFAULT': datetime.timedelta(seconds=43200),
 'SERVER_NAME': None,
 'SESSION_COOKIE_DOMAIN': None,
 'SESSION_COOKIE_HTTPONLY': True,
 'SESSION_COOKIE_NAME': 'session',
 'SESSION_COOKIE_PATH': None,
 'SESSION_COOKIE_SAMESITE': None,
 'SESSION_COOKIE_SECURE': False,
 'SESSION_REFRESH_EACH_REQUEST': True,
 'TEMPLATES_AUTO_RELOAD': None,
 'TESTING': False,
 'TRAP_BAD_REQUEST_ERRORS': None,
 'TRAP_HTTP_EXCEPTIONS': False,
 'USE_X_SENDFILE': False}
</code></pre>

<p>These are the default built-in configuration variables, which we can modify and change.</p>

<p>To modify any of these variables, we can just assign a new value to the key:</p>

<p><code>app.config[&quot;KEY&quot;] = &quot;value</code></p>

<p>For example, let&rsquo;s update the configuration  <code>SECRET_KEY</code>  variable with the following:</p>

<p><code>app.config[&quot;SECRET_KEY&quot;] = &quot;iuhto743yto34iuho287gh78&quot;
print(app.config[&quot;SECRET_KEY&quot;])</code></p>

<p>You&rsquo;ll see the following in your terminal:</p>

<p><code>iuhto743yto34iuho287gh78</code></p>

<p>The  <code>SECRET_KEY</code>  value will now be permanently modified with the new value.</p>

<p>This method of updating config values works well for small applications which don&rsquo;t require many configuration variables.</p>

<p>However it&rsquo;s not very practical when you need to work across multiple environments and set several unique config values which you&rsquo;ll need to access all across your app. Thankfully there&rsquo;s a better way.</p>

<h3 id="app-configuration-file">App Configuration file</h3>

<p>Flask allows us to create a configuration file, where we can place all of our config values, overwrite the default values and alse create our own.</p>

<p>There are a few option for this, however we&rsquo;re just going to cover our preferred method of creating a Python file and creating a  <code>Config</code>  class.</p>

<p>Go ahead and create a new file called  <code>config.py</code>  and place it in the same directory as your application entry point (Where you call  <code>app.run()</code>)</p>

<p>Here&rsquo;s the barebones of the  <code>config.py</code>  file:</p>

<p><strong>config.py</strong></p>

<pre><code class="language-py">class Config(object):
    DEBUG = False
    TESTING = False

class ProductionConfig(Config):
    pass

class DevelopmentConfig(Config):
    DEBUG = True

class TestingConfig(Config):
    TESTING = True
</code></pre>

<p>We first create the  <code>Config</code>  class and set some default attributes. In this case, we&rsquo;ve set  <code>DEBUG</code>  and  <code>TESTING</code>  to  <code>False</code>.</p>

<p>We then create 3 more classes, each of which inherits the  <code>Config</code>  class and attributes.</p>

<ul>
<li><code>ProductionConfig</code>  - Is the config class we&rsquo;ll use for running in production</li>
<li><code>DevelopmentConfig</code>  - Is the config class we&rsquo;ll use for development</li>
<li><code>TestingConfig</code>  - Is the class we&rsquo;ll use for testing</li>
</ul>

<p>By the nature of class inheritance, all of our 3 subclasses have access to the  <code>Config</code>  class attributes and can be overwritten in any of the subclasses.</p>

<p>Let&rsquo;s populate our config file with some attributes:</p>

<pre><code class="language-py">class Config(object):
    DEBUG = False
    TESTING = False
    SECRET_KEY = &quot;B\xb2?.\xdf\x9f\xa7m\xf8\x8a%,\xf7\xc4\xfa\x91&quot;

    DB_NAME = &quot;production-db&quot;
    DB_USERNAME = &quot;admin&quot;
    DB_PASSWORD = &quot;example&quot;

    IMAGE_UPLOADS = &quot;/home/username/app/app/static/images/uploads&quot;

    SESSION_COOKIE_SECURE = True

class ProductionConfig(Config):
    pass

class DevelopmentConfig(Config):
    DEBUG = True

    DB_NAME = &quot;development-db&quot;
    DB_USERNAME = &quot;admin&quot;
    DB_PASSWORD = &quot;example&quot;

    IMAGE_UPLOADS = &quot;/home/username/projects/my_app/app/static/images/uploads&quot;

    SESSION_COOKIE_SECURE = False

class TestingConfig(Config):
    TESTING = True

    DB_NAME = &quot;development-db&quot;
    DB_USERNAME = &quot;admin&quot;
    DB_PASSWORD = &quot;example&quot;

    SESSION_COOKIE_SECURE = False
</code></pre>

<p>We&rsquo;ve assigned new values to some of the built-in config variables and created some of our own.</p>

<p>Production level attributes have been placed in the parent  <code>Config</code>  class which will be inherited by the  <code>ProductionConfig</code>  class, hence the  <code>pass</code>.</p>

<p>Now that we&rsquo;ve created our config file, we&rsquo;ll need to instruct Flask to load it.</p>

<h3 id="loading-a-config-file">Loading a config file</h3>

<p>Loading a config file is a simple one liner and should be placed as close to wherever you&rsquo;ve created your  <code>app</code>  object.</p>

<p>It&rsquo;s best practice to load the config as soon as possible, just after your  <code>app</code>  object is created so any other extension has access to your configuration variables.</p>

<p>We load a config file with the  <code>from_object()</code>  method, for example:</p>

<p><code>app.config.from_object(&quot;config_filename.ConfigClass&quot;)</code></p>

<p>For example, if we want to load the  <code>DevelopmentConfig</code>  class, we would do the following:</p>

<pre><code class="language-py">app.config.from_object(&quot;config.DevelopmentConfig&quot;)
</code></pre>

<p>For  <code>ProductionConfig</code>:</p>

<pre><code class="language-py">app.config.from_object(&quot;config.ProductionConfig&quot;) 
</code></pre>

<p>In our case, we&rsquo;ve placed this line in our  <code>__init__.py</code>  file, just underneath creating our  <code>app</code>  object:</p>

<pre><code class="language-py">app = Flask(__name__)
app.config.from_object(&quot;config.DevelopmentConfig&quot;)
</code></pre>

<p>The config has now been registered on the app and is now accessible from any part of your application.</p>

<p>For example, you may want to connect to a local database using the  <code>DevelopmentConfig</code>  settings in a different part or file in your app:</p>

<pre><code class="language-py">connect(
    name=app.config[&quot;DB_NAME&quot;],
    username=app.config[&quot;DB_USERNAME&quot;],
    password=app.config[&quot;DB_PASSWORD&quot;]
)
</code></pre>

<h3 id="flask-env">Flask ENV</h3>

<p>The  <code>ENV</code>  built-in configuration variable is extremely important and should always be set outside of your application, which we set with  <code>FLASK_ENV</code>  from the terminal.</p>

<p>If you&rsquo;ve been following this series, you&rsquo;ll know that we set this as an environment variable in the terminal before running the  <code>flask run</code>  command.</p>

<p>By default,  <code>ENV</code>  is set to  <code>production</code>  which disables  <code>DEBUG</code>  mode and avoids displaying the interactive debugger to the world, meaning if you just ran your application without explicitly setting  <code>FLASK_ENV</code>, it would run in production mode.</p>

<p>Setting  <code>FLASK_ENV=development</code>  enables the debugger, which should never, ever be done in production!</p>

<p>I&rsquo;ve found a nice pattern is to load a config based on the  <code>ENV</code>  environment variable. We can do so with the following:</p>

<pre><code class="language-py">app = Flask(__name__)

if app.config[&quot;ENV&quot;] == &quot;production&quot;:
    app.config.from_object(&quot;config.ProductionConfig&quot;)
else:
    app.config.from_object(&quot;config.DevelopmentConfig&quot;)
</code></pre>

<p>This pattern allows us to leave our code alone and control the config environment outside the application by setting the  <code>FLASK_ENV</code>  environment variable in the terminal.</p>

<p>To illustrate this, we&rsquo;ll change our  <code>FLASK_ENV</code>  and print it after loading the config:</p>

<pre><code class="language-py">if app.config[&quot;ENV&quot;] == &quot;production&quot;:
    app.config.from_object(&quot;config.ProductionConfig&quot;)
else:
    app.config.from_object(&quot;config.DevelopmentConfig&quot;)

print(f'ENV is set to: {app.config[&quot;ENV&quot;]}')
</code></pre>

<p>In the terminal, run the following to set  <code>FLASK_ENV</code>  to  <code>development</code></p>

<p><code>export FLASK_ENV=development</code></p>

<p>Run  <code>flask run</code>  and watch your terminal, you&rsquo;ll see:</p>

<pre><code class="language-py">$ flask run

 * Serving Flask app &quot;run.py&quot; (lazy loading)
 * Environment: development
 * Debug mode: on
ENV is set to: development
</code></pre>

<p>Now repeat the process, changing  <code>FLASK_ENV</code>  to production:</p>

<p><code>export FLASK_ENV=production</code></p>

<p>Run  <code>flask run</code>  again and you&rsquo;ll see:</p>

<pre><code class="language-py">$ flask run
 * Serving Flask app &quot;run.py&quot;
 * Environment: production
   WARNING: Do not use the development server in a production environment.
   Use a production WSGI server instead.
 * Debug mode: off
ENV is set to: production
</code></pre>

<p>Flask gives us a big red warning when the environment is set to production, just to drill home the importance of not running the development server in a production environment.</p>

<h3 id="alternative-config-methods">Alternative config methods</h3>

<p>Flask is a very flexible framework and provides many ways to configure our application.</p>

<p>Take a look at the  <a href="http://flask.pocoo.org/docs/1.0/config/">Flask configuration documentation</a>  for some alternative options and feel free to experiment with some alternative methods!</p>

<p>Last modified  ·  28 Feb 2019</p>

<blockquote>
<p>Written with <a href="https://pythonise.com/series/learning-flask/flask-configuration-files">StackEdit</a>.</p>
</blockquote>
</article>

      <div class="book-footer justify-between">
  

  

  
  <div>
    <a class="flex align-center" href="https://github.com/alex-shpak/hugo-book/edit/master/exampleSite/content/docs%5cPython%5cFlask%5cLearning-Flask%5cep-12.md" target="_blank">
      <img src="/library/tutorials/svg/edit.svg" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>
  

</div>

      
    </div>

    
  

  <aside class="book-toc levels-true fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#flask-configuration-files-learning-flask-ep-12">Flask configuration files | Learning Flask Ep. 12</a>
<ul>
<li>
<ul>
<li><a href="#config-basics">Config basics</a></li>
<li><a href="#app-configuration-file">App Configuration file</a></li>
<li><a href="#loading-a-config-file">Loading a config file</a></li>
<li><a href="#flask-env">Flask ENV</a></li>
<li><a href="#alternative-config-methods">Alternative config methods</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
</body>

</html>
